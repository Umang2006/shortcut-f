<script>
    // Function to get URL parameters
    function getUrlParams() {
        const params = new URLSearchParams(window.location.search);
        return params.get('manager') || 'default'; // Default manager if none is specified
    }

    // Modify loadShortcuts to use a manager name
    function loadShortcuts() {
        const managerName = getUrlParams();
        const shortcutsContainer = document.getElementById('shortcuts-container');
        shortcutsContainer.innerHTML = ''; // Clear existing shortcuts

        const shortcuts = JSON.parse(localStorage.getItem(`shortcuts_${managerName}`)) || [];
        shortcuts.forEach((shortcut, index) => {
            const shortcutLink = document.createElement('a');
            shortcutLink.href = shortcut.url;
            shortcutLink.target = '_blank';
            shortcutLink.classList.add('shortcut-item');
            shortcutLink.innerText = shortcut.name;

            // Remove button
            const removeBtn = document.createElement('button');
            removeBtn.classList.add('remove-btn');
            removeBtn.innerText = 'x';
            removeBtn.addEventListener('click', (e) => {
                e.preventDefault();
                removeShortcut(index, managerName);
            });

            // Append remove button to shortcut item
            shortcutLink.appendChild(removeBtn);
            shortcutsContainer.appendChild(shortcutLink);
        });
    }

    // Function to add new shortcut
    document.getElementById('add-shortcut-btn').addEventListener('click', () => {
        const shortcutName = document.getElementById('shortcut-name').value.trim();
        const shortcutUrl = document.getElementById('shortcut-url').value.trim();
        const managerName = getUrlParams(); // Get manager name

        if (shortcutName && shortcutUrl) {
            const shortcuts = JSON.parse(localStorage.getItem(`shortcuts_${managerName}`)) || [];
            shortcuts.push({ name: shortcutName, url: shortcutUrl });
            localStorage.setItem(`shortcuts_${managerName}`, JSON.stringify(shortcuts));
            document.getElementById('shortcut-name').value = '';
            document.getElementById('shortcut-url').value = '';
            loadShortcuts();
        } else {
            alert('Please enter both a name and a valid URL.');
        }
    });

    // Function to remove a shortcut
    function removeShortcut(index, managerName) {
        const shortcuts = JSON.parse(localStorage.getItem(`shortcuts_${managerName}`)) || [];
        shortcuts.splice(index, 1); // Remove shortcut at given index
        localStorage.setItem(`shortcuts_${managerName}`, JSON.stringify(shortcuts)); // Save updated shortcuts to localStorage
        loadShortcuts(); // Reload shortcuts
    }

    // Load shortcuts when page loads
    window.onload = loadShortcuts;
</script>
